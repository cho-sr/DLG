# Configuration for FedAvg MIA Sparsification Experiments

[experiment]
# 기본 실험 설정
model = ResNet18
dataset = CIFAR10
attack_type = ModelInversionAttack

[fedavg]
# FedAvg 설정 (클라이언트 시뮬레이션)
local_epochs = 1
local_lr = 0.01
optimizer = SGD
batch_size = 1  # 단일 이미지

[mia]
# Model Inversion Attack 설정
mia_iterations = 300
mia_optimizer = LBFGS
mia_learning_rate = 1.0

# 정규화 파라미터
tv_weight = 0.001      # Total Variation 가중치 (이미지 부드러움)
l2_weight = 0.0001     # L2 정규화 (극단값 방지)

[sparsification]
# 기본 sparsity 비율들
default_ratios = [1.0, 0.5, 0.1, 0.05, 0.01]

# 설명
# 1.0 = 100% (모든 파라미터 전송) - 기준선
# 0.5 = 50% (상위 50% 파라미터)
# 0.1 = 10% (상위 10% 파라미터)
# 0.05 = 5% (상위 5% 파라미터)
# 0.01 = 1% (상위 1% 파라미터)

[device]
# 디바이스 설정
device = auto  # auto, cuda, cpu, mps 중 선택

[visualization]
# 시각화 설정
save_ground_truth = true
save_initial_dummy = true
save_progress = true
save_loss_curve = true
save_final_comparison = true
save_gradient_distribution = true
dpi = 150
figure_format = png

[random]
# 재현성을 위한 난수 설정
seed = 1234

[batch_experiment]
# 배치 실험 설정
timeout_per_experiment = 600  # 초 단위
parallel_experiments = false   # 현재는 순차 실행
